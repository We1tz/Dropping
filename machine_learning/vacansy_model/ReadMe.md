# Работа с моделью для вакансии
Перед началом работы с моделью необходимо [скачать](https://drive.google.com/drive/folders/1HCnrE-ixOHJARaV3oMQ-0A9pD-C3HKaF?usp=sharing) эти файлы и переместить в директорию с проектом.
В процессе иницилизации модели необходимо выполнять всё верно для того, чтобы модель дава конкретные предсказания, в проекте используеться модель ruBERT-tiny. МОДЕЛЬ НЕ НАДО ПРЕДОБУЧАТЬ. В файле model.pkl и так лежит готовая модель.
## Содержание:
* [Установка библиотек](#Установка-библиотек)
* [Иницилизация модели](#Иницилизация-модели)
* [Пайплайн для данных](#Пайплайн-для-данных)
    * [Компоненты пайплайна](#Компоненты-пайплайна)
* [Работа модели](#Работа-модели)

## Установка библиотек
Перед началом работы необходимо установить библиотеки: <br>
```
pip intsall pymorphy3 nltk selenium python-docx psycopg2 pandas transformers torch easyocr torchvision torchaudio numpy beautifulsoup4 joblib
```
> Если код выдает ошибку об отсутвуюшем модуле, то скорее всего библиотеки нет в списке, или она некорректно установилась 

После необходимо установить список стоп-слов:
```
import nltk
nltk.download('stopwords')
ru_stopwords = stopwords.words("russian")
```

> ВАЖНО: Данный код прописываеться в консоле python


## Иницилизация модели
Для корректной работы модели нужно иметь файлы модели и саму модель в одной директорий.<br>
Для иницилизации в проект прописываем в нужном вам файле следующий код:
```
import joblib
model = joblib.load('vacancy_model.pkl')
```
Наша модель записана в переменной model.

## Пайплайн для данных
Пайплайн состоит из трех компонентов: vacansy_pipline, parser, imageread. Поэтому эти файлы должны быть в одной директории.
Пайплайн состоит из нескольких компонентов ниже описанны их применения
### Компоненты пайплайна
1. Обработка готового текста (preprocess_text):
       Данный метод используеться в случае, когда мы имеем уже готовый текст вакансии и его необходимо лишь предобработать.
```
from vacansy_pipline import VacansyPipline


t = 'текст который передал пользователь'

x = VacansyPipline.preprocess_text(x) # обработанный текст
```

2. Обработка текста с картинки (preprocess_img):
       Для данного метода необходимо сохранять файл с картинкой, путь до файла будет передаваться в качестве аргумента функции.
```
from vacansy_pipline import VacansyPipline

x = VacansyPipline.preprocess_img(path_img) # path_img: относительный путь до изображения
```

3. Обработка вакансий на сайте (preprocess_html):
       Данный метод принимает ссылку на вакансию и возвращает её обработанный вариант, список сайтов с вакансиями, которые скрипт может обработать:<br>
   * hh.ru,<br>
   * avito.ru,<br>
   * superjob.ru,<br>
   * zarplata.ru.
```
from vacansy_pipline import VacansyPipline

x = VacansyPipline.preprocess_html(url) # url: ссылка на вакансию сайт из списка (hh.ru, avito.ru, superjob.ru, zarplata.ru)
```

## Работа модели
Для использования модели необходимо [установить](#Иницилизация-модели) её и передать данные обработанные, с помощью [пайплайна](#Пайплайн-для-данных).
> В примерах в переменную x записывались данные, которые мы будем передавать моделе.

Предсказание модели:
```
model.predict(x)
```
Модель возвращает два значения: 0 - хорошая вакансия, 1 - мошенническая вакансия